<div class="home">
  <mat-toolbar>
    <span><a href="/">Github Events</a></span>
    <span class="toolbar-spacer"></span>
    <button mat-icon-button aria-label="key" (click)="openDialog()">
      <mat-icon>vpn_key</mat-icon>
    </button>
  </mat-toolbar>
  <mat-card>
    <form [formGroup]='form' (submit)="onSubmit()">
      <mat-form-field class="form">
        <mat-label>Username</mat-label>
        <input matInput type="text" placeholder="Ex. torvalds" formControlName="username">
        <mat-error *ngIf="form.get('username').invalid">Fill in the Username</mat-error>
      </mat-form-field>
      <br>
      <button mat-raised-button type="submit">Submit </button>
    </form>
  </mat-card>
  <mat-card *ngIf="userEvents && userReceivedEvents">
    <mat-tab-group mat-align-tabs="center">
      <mat-tab *ngFor="let type of [userEvents, userReceivedEvents]">
        <ng-template mat-tab-label *ngIf="type == userEvents">
          Events Created
        </ng-template>
        <ng-template mat-tab-label *ngIf="type == userReceivedEvents">
          Events Received
        </ng-template>
        <mat-accordion multi>
          <mat-expansion-panel *ngFor="let event of type">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <b>{{ event.type }}</b> &nbsp;[{{ event.created_at }}]
              </mat-panel-title>
              <mat-panel-description>
                {{ event.repo.name }} by &nbsp;
                <a href="https://github.com/{{ event.actor.login }}">
                  {{ event.actor.login }}
                </a>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <div *ngIf="event.type == 'CommitCommentEvent'"></div>
            <div *ngIf="event.type == 'CreateEvent'"></div>
            <div *ngIf="event.type == 'DeleteEvent'"></div>
            <div *ngIf="event.type == 'ForkEvent'"></div>
            <div *ngIf="event.type == 'GollumEvent'"></div>
            <div *ngIf="event.type == 'IssueCommentEvent'"></div>
            <div *ngIf="event.type == 'IssuesEvent'"></div>
            <div *ngIf="event.type == 'MemberEvent'"></div>

            <div *ngIf="event.type == 'PublicEvent'"></div>
            <div *ngIf="event.type == 'PullRequestEvent'"></div>
            <div *ngIf="event.type == 'PullRequestReviewCommentEvent'"></div>
            <div *ngIf="event.type == 'PushEvent'">
              <mat-list *ngFor="let commit of event.payload.commits">
                <mat-divider *ngIf="event.payload.commits.length >0"></mat-divider>
                <mat-list-item>
                  <a href="{{ commit.url }}">{{ commit.message }}</a>
                </mat-list-item>
              </mat-list>
            </div>
            <div *ngIf="event.type == 'ReleaseEvent'"></div>
            <div *ngIf="event.type == 'SponsorshipEvent'"></div>
            <div *ngIf="event.type == 'WatchEvent'"></div>
          </mat-expansion-panel>
        </mat-accordion>
      </mat-tab>
    </mat-tab-group>
  </mat-card>
</div>
